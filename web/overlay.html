<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ButtCaster â€¢ Overlay</title>
  <link rel="stylesheet" href="css/badge.css">
  <link rel="icon" href="../public/logo-buttcaster.svg">
  <style>
    :root {
      --bg: #f7f8fb;
      --panel: #ffffff;
      --ink: #0a0d14;
      --muted: #5d6676;
      --brand1: #ff7ac8;
      --brand2: #9ad8ff;
      --pill: linear-gradient(90deg,var(--brand1),var(--brand2));
      --accent-shadow: 0 6px 18px rgba(60,80,130,.12);
    }
    html,body { height:100%; margin:0; background:transparent; color:var(--ink); }
    .stage-wrap { width: 960px; margin: 0 auto; padding: 6px; }
    .stage {
      background: #fff;
      border-radius: 20px;
      width: 960px;
      height: 540px;
      position: relative;
      box-shadow: 0 12px 40px rgba(20,30,50,.12);
      overflow: hidden;
    }
    .grid {
      position: absolute;
      inset: 0;
      background-image: radial-gradient(circle at 10px 10px,rgba(170,180,200,.25) 1px, transparent 1px);
      background-size: 20px 20px;
      pointer-events:none;
    }
    .glow {
      position:absolute; inset:0;
      background: radial-gradient(600px 300px at 15% 15%, rgba(255,122,200,.35), transparent 55%),
                  radial-gradient(600px 300px at 85% 30%, rgba(154,216,255,.35), transparent 55%);
      pointer-events:none; mix-blend: screen;
    }
    .canvas-abs { position:absolute; inset:0; transform-origin:0 0; min-width:100%; }
    /* Example element for visual check */
    .pill { position:absolute; left:24px; top:24px; padding:10px 14px; border-radius:18px; background:var(--pill); color:#111; font-weight:900; box-shadow: 0 10px 30px rgba(120,60,140,.18); }
    header { position:fixed; left:16px; top:16px; display:flex; gap:10px; align-items:center; z-index:5; }
    header img { width:28px; height:28px; }
    /* OBS suggestion: set browser source to 1920x1080, enable transparency */
  </style>
</head>
<body>
  <header>
    <img src="../public/logo-buttcaster.svg" alt="logo">
    <div id="badge">
      <span id="badge-conn" title="Disconnected"></span>
      <span id="badge-devices">0 devices</span>
    </div>
  </header>

  <div class="stage-wrap">
    <div class="stage">
      <div class="grid"></div>
      <div class="glow"></div>
      <div class="canvas-abs" id="canvas-abs">
        <div class="pill">ButtCaster Overlay</div>
      </div>
    </div>
  </div>

  <script type="module">
    import { connectIntiface, onDeviceCount } from "./js/intiface.js";
    import { applyCanvasScale } from "./js/canvas-scale.js";

    applyCanvasScale(".stage", ".canvas-abs");
    // Auto-connect on overlay load; adjust URL if needed
    connectIntiface("ws://127.0.0.1:12345").catch(console.error);
    onDeviceCount(n => console.log("[Overlay] Devices:", n));
  </script>
</body>
</html>
